# # var abc = { println("Hello"); 40 + 2 };
# # #var foo = fun() { () };
# # var bar = Bar(fun(x) { x + abc });

# var foo = (key="foo");

# fun mainPage(_) {
#   page
#    <#>
#     <!-- <button l:onclick="{switch (bar) { case Bar(g) -> println(intToString(g(42))) } }">Click me!</button> -->
#    <button l:onclick="{println(foo.key)}">Click me!</button>
#    </#>
# }

# fun main() {
#   addRoute("/", mainPage);
#   servePages()
# }

# main()

# # typename T(p::Presence) = (bar:(),foo{p});

# # fun f0() { (bar=()) : T({-}) }
# # fun f1() { (bar=(),foo=42) : T({:Int}) }
# # fun f2() { (bar=(),foo=42) : T({%}) }
# # fun f3() { (bar=(),foo=42) : T({%e}) }
# # fun f4(r : T({_})) { r.bar }
# # fun f5(r : T({_})) { r }

# # sig f : () -> T
# # fun f() { A }


var foo = (key="foo");
fun printFooKey() { println(foo.key) }

var foofoo = (f=(key="foo"));
fun printFooFooKey() { println(foofoo.f.key) }

fun mainPage(_) {
  page
   <#>
   <button l:onclick="{println(foo.key)}">println(foo.key)</button>
   <button l:onclick="{println(foofoo.f.key)}">println(foofoo.f.key)</button>
   <button l:onclick="{printFooKey()}">printFooKey()</button>
   <button l:onclick="{printFooFooKey()}">printFooFooKey()</button>
   </#>
}

fun main() {
  addRoute("/", mainPage);
  servePages()
}

main()
